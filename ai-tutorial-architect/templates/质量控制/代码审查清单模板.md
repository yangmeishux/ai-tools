# 代码审查清单模板

> 适用于教程中代码示例的质量审查、确保代码规范、正确、可运行
> 质量目标：代码规范、安全、高效、可维护
> Agent 配置：Practitioner（主导）+ Code-Reviewer（专项）+ Chief（审核）

---

## 🎭 Agent 协作流程

```
[@practitioner] 收集教程中所有代码示例
    ↓
[@code-reviewer] 按清单逐项审查代码质量
    ↓
[@practitioner] 实际运行代码，验证可运行性
    ↓
[@fact-checker] 验证技术实现和最佳实践的准确性
    ↓
[@editor] 整理审查结果，提出修改建议
    ↓
[@writer] 根据审查结果修改代码
    ↓
[@practitioner] 再次验证修改后的代码
    ↓
[Chief] 审核并确认代码质量达标
```

---

## 📋 模板使用指南

### 适用场景
- ✅ 教程代码示例的发布前审查
- ✅ 教程更新的代码重新验证
- ✅ 多人协作教程的统一代码质量
- ✅ 代码重构后的质量检查

### 不适用场景
- ❌ 纯概念讲解（无代码）
- ❌ 伪代码或示意性代码
- ❌ 故意展示错误的代码（教学用途）

### 核心特点
- 📋 **全面覆盖**：从语法到安全的全方位检查
- ✅ **可操作**：每项检查都有明确的标准
- 🎯 **优先级**：区分必须修复和建议优化
- 🔄 **可复用**：可作为常规审查流程使用

---

# [教程名称] 代码审查清单

> [教程名称] 所有代码示例的质量审查报告
> 
> 📅 审查日期：YYYY-MM-DD | 👤 审查人：[姓名] | 📝 代码版本：[版本]

---

## 📊 审查概览

### 审查统计

| 类别 | 总数 | 通过 | 待修复 | 不适用 |
|------|------|------|--------|--------|
| **可运行性** | X | X | X | X |
| **代码规范** | X | X | X | X |
| **安全性** | X | X | X | X |
| **性能** | X | X | X | X |
| **可维护性** | X | X | X | X |

### 审查结论

- **整体评级**：🟢 通过 / 🟡 有条件通过 / 🔴 不通过
- **主要问题**：[问题数量] 个
- **建议优化**：[建议数量] 个
- **是否可发布**：✅ 可以 / ⚠️ 修复后可以 / ❌ 不可以

---

## 一、可运行性检查

### 1.1 基础运行检查

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 1.1.1 | 所有代码都能在指定环境中运行 | ✅/❌/➖ | |
| 1.1.2 | 没有语法错误 | ✅/❌/➖ | |
| 1.1.3 | 没有运行时异常（在正常使用场景下） | ✅/❌/➖ | |
| 1.1.4 | 代码执行结果与文档描述一致 | ✅/❌/➖ | |
| 1.1.5 | 所有 import/require 的依赖都已说明 | ✅/❌/➖ | |

### 1.2 环境兼容性检查

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 1.2.1 | 代码兼容文档声明的操作系统 | ✅/❌/➖ | |
| 1.2.2 | 代码兼容文档声明的语言版本 | ✅/❌/➖ | |
| 1.2.3 | 代码兼容文档声明的依赖版本 | ✅/❌/➖ | |
| 1.2.4 | 没有使用已弃用或即将弃用的 API | ✅/❌/➖ | |

### 1.3 边界情况检查

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 1.3.1 | 空值/undefined 处理 | ✅/❌/➖ | |
| 1.3.2 | 异常输入处理 | ✅/❌/➖ | |
| 1.3.3 | 边界值处理 | ✅/❌/➖ | |
| 1.3.4 | 资源释放（文件、连接等） | ✅/❌/➖ | |

---

## 二、代码规范检查

### 2.1 命名规范

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 2.1.1 | 变量名有意义且符合命名规范 | ✅/❌/➖ | |
| 2.1.2 | 函数名清晰表达功能 | ✅/❌/➖ | |
| 2.1.3 | 类名使用名词，方法名使用动词 | ✅/❌/➖ | |
| 2.1.4 | 常量使用全大写或特定标记 | ✅/❌/➖ | |
| 2.1.5 | 没有拼音命名或无意义命名 | ✅/❌/➖ | |

### 2.2 代码格式

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 2.2.1 | 缩进一致（空格/Tab） | ✅/❌/➖ | |
| 2.2.2 | 行长度适中（建议 < 120 字符） | ✅/❌/➖ | |
| 2.2.3 | 适当的空行分隔逻辑块 | ✅/❌/➖ | |
| 2.2.4 | 括号使用一致 | ✅/❌/➖ | |
| 2.2.5 | 注释格式规范 | ✅/❌/➖ | |

### 2.3 注释规范

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 2.3.1 | 复杂逻辑有注释说明 | ✅/❌/➖ | |
| 2.3.2 | 函数/方法有 JSDoc/Docstring | ✅/❌/➖ | |
| 2.3.3 | 没有冗余或错误的注释 | ✅/❌/➖ | |
| 2.3.4 | 没有注释掉的代码 | ✅/❌/➖ | |

---

## 三、安全性检查

### 3.1 输入验证

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 3.1.1 | 用户输入都经过验证 | ✅/❌/➖ | |
| 3.1.2 | SQL 查询使用参数化（防注入） | ✅/❌/➖ | |
| 3.1.3 | 文件路径经过安全检查 | ✅/❌/➖ | |
| 3.1.4 | URL/命令行参数经过校验 | ✅/❌/➖ | |

### 3.2 敏感数据处理

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 3.2.1 | 密码/密钥不在代码中硬编码 | ✅/❌/➖ | |
| 3.2.2 | 敏感信息不在日志中输出 | ✅/❌/➖ | |
| 3.2.3 | 敏感数据有适当的加密/脱敏 | ✅/❌/➖ | |

### 3.3 常见安全漏洞

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 3.3.1 | 没有 XSS 漏洞（输出转义） | ✅/❌/➖ | |
| 3.3.2 | 没有 CSRF 漏洞（有防护措施） | ✅/❌/➖ | |
| 3.3.3 | 没有不安全的反序列化 | ✅/❌/➖ | |
| 3.3.4 | 没有硬编码的敏感信息 | ✅/❌/➖ | |

---

## 四、性能检查

### 4.1 算法效率

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 4.1.1 | 没有明显的性能瓶颈（如嵌套循环） | ✅/❌/➖ | |
| 4.1.2 | 使用了合适的数据结构 | ✅/❌/➖ | |
| 4.1.3 | 算法复杂度合理 | ✅/❌/➖ | |
| 4.1.4 | 没有重复计算（适当缓存） | ✅/❌/➖ | |

### 4.2 资源使用

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 4.2.1 | 数据库连接正确关闭 | ✅/❌/➖ | |
| 4.2.2 | 文件句柄正确关闭 | ✅/❌/➖ | |
| 4.2.3 | 没有内存泄漏风险 | ✅/❌/➖ | |
| 4.2.4 | 没有不必要的资源占用 | ✅/❌/➖ | |

### 4.3 常见性能问题

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 4.3.1 | 没有 N+1 查询问题 | ✅/❌/➖ | |
| 4.3.2 | 循环中没有数据库/IO 操作 | ✅/❌/➖ | |
| 4.3.3 | 适当的批量操作（而非单条） | ✅/❌/➖ | |
| 4.3.4 | 异步操作使用正确 | ✅/❌/➖ | |

---

## 五、可维护性检查

### 5.1 代码组织

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 5.1.1 | 函数/方法长度适中（建议 < 50 行） | ✅/❌/➖ | |
| 5.1.2 | 类/模块职责单一 | ✅/❌/➖ | |
| 5.1.3 | 没有过多的参数（建议 < 5 个） | ✅/❌/➖ | |
| 5.1.4 | 代码没有重复（DRY 原则） | ✅/❌/➖ | |

### 5.2 可读性

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 5.2.1 | 代码逻辑清晰易懂 | ✅/❌/➖ | |
| 5.2.2 | 没有过于复杂的表达式 | ✅/❌/➖ | |
| 5.2.3 | 适当的抽象和封装 | ✅/❌/➖ | |
| 5.2.4 | 错误信息清晰有用 | ✅/❌/➖ | |

### 5.3 可测试性

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 5.3.1 | 代码结构便于测试 | ✅/❌/➖ | |
| 5.3.2 | 没有难以模拟的依赖 | ✅/❌/➖ | |
| 5.3.3 | 关键逻辑有对应的测试（如适用） | ✅/❌/➖ | |

---

## 六、教程专用检查

### 6.1 教学效果

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 6.1.1 | 代码复杂度适合目标读者 | ✅/❌/➖ | |
| 6.1.2 | 关键步骤有详细注释说明 | ✅/❌/➖ | |
| 6.1.3 | 代码示例完整，可以独立运行 | ✅/❌/➖ | |
| 6.1.4 | 代码逐步递进，符合学习曲线 | ✅/❌/➖ | |

### 6.2 代码与文档一致性

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| 6.2.1 | 代码与文字描述一致 | ✅/❌/➖ | |
| 6.2.2 | 代码输出与文档中的预期输出一致 | ✅/❌/➖ | |
| 6.2.3 | 文件名、变量名与文档一致 | ✅/❌/➖ | |
| 6.2.4 | 代码版本与文档声明的版本一致 | ✅/❌/➖ | |

---

## 七、问题汇总

### 🔴 必须修复（阻塞性问题）

| # | 问题 | 位置 | 严重程度 | 修复建议 | 状态 |
|---|------|------|----------|----------|------|
| 1 | [问题描述] | [章节/文件] | 高 | [建议] | 待修复 |
| 2 | [问题描述] | [章节/文件] | 高 | [建议] | 待修复 |

### 🟡 建议修复（影响体验）

| # | 问题 | 位置 | 严重程度 | 修复建议 | 状态 |
|---|------|------|----------|----------|------|
| 1 | [问题描述] | [章节/文件] | 中 | [建议] | 待修复 |
| 2 | [问题描述] | [章节/文件] | 中 | [建议] | 待修复 |

### 🟢 可选优化（提升质量）

| # | 问题 | 位置 | 严重程度 | 修复建议 | 状态 |
|---|------|------|----------|----------|------|
| 1 | [问题描述] | [章节/文件] | 低 | [建议] | 待修复 |
| 2 | [问题描述] | [章节/文件] | 低 | [建议] | 待修复 |

---

## 八、代码示例质量评分

### 逐章评分

| 章节 | 可运行性 | 规范性 | 安全性 | 性能 | 可维护性 | 平均分 |
|------|----------|--------|--------|------|----------|--------|
| 第 1 章 | X/10 | X/10 | X/10 | X/10 | X/10 | X/10 |
| 第 2 章 | X/10 | X/10 | X/10 | X/10 | X/10 | X/10 |
| 第 3 章 | X/10 | X/10 | X/10 | X/10 | X/10 | X/10 |
| ... | ... | ... | ... | ... | ... | ... |
| **平均分** | X/10 | X/10 | X/10 | X/10 | X/10 | X/10 |

### 质量分布

```
章节质量分布

第 1 章  ████████████████████ 9.2/10
第 2 章  ██████████████████░░ 8.8/10
第 3 章  ████████████████████ 9.5/10
第 4 章  ████████████████░░░░ 8.0/10
第 5 章  ███████████████████░ 9.0/10

平均分: 8.9/10
```

---

## 九、审查结论

### 总体评价

**代码质量评级**：
- 🥇 **优秀**（平均分 >= 9.0）
- 🥈 **良好**（平均分 >= 8.0）
- 🥉 **合格**（平均分 >= 7.0）
- ❌ **不合格**（平均分 < 7.0）

**本教程评级**：[评级]

### 发布建议

- [ ] **可以发布**：代码质量良好，无明显问题
- [ ] **修复后发布**：存在 [数量] 个必须修复的问题
- [ ] **不建议发布**：存在严重问题，需要全面整改

### 主要优点

1. [优点 1]
2. [优点 2]
3. [优点 3]

### 主要改进点

1. [改进点 1]
2. [改进点 2]
3. [改进点 3]

---

## 十、审查记录

| 轮次 | 日期 | 审查人 | 结果 | 问题数 | 备注 |
|------|------|--------|------|--------|------|
| 初筛 | YYYY-MM-DD | [姓名] | [结果] | X | [备注] |
| 复审 | YYYY-MM-DD | [姓名] | [结果] | Y | [备注] |
| 终审 | YYYY-MM-DD | [姓名] | [结果] | 0 | [备注] |

---

## 附录

### A. 常用工具推荐

| 工具 | 用途 | 推荐配置 |
|------|------|----------|
| [工具 1] | [用途] | [配置] |
| [工具 2] | [用途] | [配置] |

### B. 语言特定检查项

#### [语言 A] 特定检查

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| A.1 | [特定检查项] | ✅/❌/➖ | |
| A.2 | [特定检查项] | ✅/❌/➖ | |

#### [语言 B] 特定检查

| # | 检查项 | 状态 | 备注 |
|---|--------|------|------|
| B.1 | [特定检查项] | ✅/❌/➖ | |
| B.2 | [特定检查项] | ✅/❌/➖ | |

### C. 审查脚本

```bash
#!/bin/bash
# 自动化代码检查脚本

# 1. 语法检查
echo "=== 语法检查 ==="
[检查命令]

# 2. 规范检查
echo "=== 规范检查 ==="
[检查命令]

# 3. 安全扫描
echo "=== 安全扫描 ==="
[检查命令]

echo "=== 检查完成 ==="
```

---

## ✅ 审查清单使用检查

> **[@practitioner] 自查项**：

- [ ] 所有代码都已运行验证
- [ ] 所有问题都已记录
- [ ] 评分客观公正
- [ ] 修复建议具体可行

---

*基于 AI Tutorial Architect 代码审查清单模板 v1.0.0*
*最后更新：2026-01-28*
